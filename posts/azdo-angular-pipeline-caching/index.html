<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Working Azure DevOps Pipeline Caching for Angular CI" /><meta name="author" content="Josh Johanning" /><meta property="og:locale" content="en" /><meta name="description" content="I share how I finally got the Pipeline Cache task to work with my Angular build pipeline" /><meta property="og:description" content="I share how I finally got the Pipeline Cache task to work with my Angular build pipeline" /><link rel="canonical" href="https://josh-ops.com/posts/azdo-angular-pipeline-caching/" /><meta property="og:url" content="https://josh-ops.com/posts/azdo-angular-pipeline-caching/" /><meta property="og:site_name" content="josh-ops" /><meta property="og:image" content="https://josh-ops.com/assets/screenshots/2021-11-14-azdo-angular-pipeline-caching/load-npm-cache.png" /><meta property="og:image:height" content="614" /><meta property="og:image:width" content="1212" /><meta property="og:image:alt" content="Azure DevOps Pipeline Cache Task in action" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-11-14T20:30:00-06:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://josh-ops.com/assets/screenshots/2021-11-14-azdo-angular-pipeline-caching/load-npm-cache.png" /><meta name="twitter:image:alt" content="Azure DevOps Pipeline Cache Task in action" /><meta property="twitter:title" content="Working Azure DevOps Pipeline Caching for Angular CI" /><meta name="twitter:site" content="@jjjettrain" /><meta name="twitter:creator" content="@Josh Johanning" /><meta name="google-site-verification" content="google-site-verification=eTIC71VhPBtwll8rNv7qlXud1yJh6E88No39MdcM_MI" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Josh Johanning"},"dateModified":"2022-07-01T15:39:30-05:00","datePublished":"2021-11-14T20:30:00-06:00","description":"I share how I finally got the Pipeline Cache task to work with my Angular build pipeline","headline":"Working Azure DevOps Pipeline Caching for Angular CI","image":{"width":1212,"height":614,"alt":"Azure DevOps Pipeline Cache Task in action","url":"https://josh-ops.com/assets/screenshots/2021-11-14-azdo-angular-pipeline-caching/load-npm-cache.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://josh-ops.com/posts/azdo-angular-pipeline-caching/"},"url":"https://josh-ops.com/posts/azdo-angular-pipeline-caching/"}</script><title>Working Azure DevOps Pipeline Caching for Angular CI | josh-ops</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="josh-ops"><meta name="application-name" content="josh-ops"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/sample/headshot.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">josh-ops</a></div><div class="site-subtitle font-italic">A DevOps Blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/speaking/" class="nav-link"> <i class="fa-fw fas fa-comment ml-xl-3 mr-xl-3 unloaded"></i> <span>SPEAKING</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/joshjohanning" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/jjjettrain" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/joshua-johanning/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Working Azure DevOps Pipeline Caching for Angular CI</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Working Azure DevOps Pipeline Caching for Angular CI</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1636943400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Nov 14, 2021 </em> </span> <span> Updated <em class="" data-ts="1656707970" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 1, 2022 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1212 614'%3E%3C/svg%3E" data-src="/assets/screenshots/2021-11-14-azdo-angular-pipeline-caching/load-npm-cache.png" class="preview-img bg" alt="Azure DevOps Pipeline Cache Task in action" width="1212" height="614" data-proofer-ignore><figcaption class="pt-2 pb-2">Azure DevOps Pipeline Cache Task in action</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> Josh Johanning </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="834 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><h2 id="overview"><span class="mr-2">Overview</span><a href="#overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I’ve tried several times to implement the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/release/caching?view=azure-devops#nodejsnpm">Pipeline Cache task using Microsoft’s documentation</a>, but have failed every time. I seemed to configure everything like the documentation indicates for my Node.js/npm (Angular) build, but the results are very inconclusive - I didn’t really be saving any CI time.</p><p>For builds where the <code class="language-plaintext highlighter-rouge">npm install</code> takes 30-60 seconds…it’s not really a problem. However, recently I was working with a team where the <code class="language-plaintext highlighter-rouge">npm install</code> was taking 10 (!!!) minutes. This was not going to work for me, and for my sanity, I had to get this pipeline caching figured out.</p><p><img data-src="/assets/screenshots/2021-11-14-azdo-angular-pipeline-caching/slow-npm-install.png" alt="slow npm install" width="500" class="shadow" data-proofer-ignore> <em>npm install taking 10 minutes to run</em></p><h2 id="how-to---the-explanation"><span class="mr-2">How To - The Explanation</span><a href="#how-to---the-explanation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I was finally able to figure out what I was missing, part in thanks to <a href="https://www.highperformanceprogrammer.com/2021/05/30/how-to-cache-node-modules-npm-install-command-in-azure-devops-classic-builds/">this post from High Performance Programmer</a> - in particular, their screenshot:</p><p><img data-src="/assets/screenshots/2021-11-14-azdo-angular-pipeline-caching/CacheBuildStep.png" alt="pipeline cache task configuration from High Performance Programmer" width="600" class="shadow" data-proofer-ignore> <em>Cache task configuration in a Classic Build Definition</em></p><p>Note how this differs from <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/release/caching?view=azure-devops#nodejsnpm">Microsoft’s documentation</a>:</p><div class="language-yml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="na">variables</span><span class="pi">:</span>
  <span class="na">npm_config_cache</span><span class="pi">:</span> <span class="s">$(Pipeline.Workspace)/.npm</span>

<span class="na">steps</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s">Cache@2</span>
  <span class="na">inputs</span><span class="pi">:</span>
    <span class="na">key</span><span class="pi">:</span> <span class="s1">'</span><span class="s">npm</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">"$(Agent.OS)"</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">package-lock.json'</span>
    <span class="na">restoreKeys</span><span class="pi">:</span> <span class="pi">|</span>
       <span class="s">npm | "$(Agent.OS)"</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">$(npm_config_cache)</span>
  <span class="na">displayName</span><span class="pi">:</span> <span class="s">Cache npm</span>
</pre></table></code></div></div><p>Notice how the first screenshot is caching the <code class="language-plaintext filepath highlighter-rouge">$(Build.SourcesDirectory)/Project/node_modules</code> folder vs Microsoft’s code sample is caching <code class="language-plaintext filepath highlighter-rouge">$(Pipeline.Workspace)/.npm</code> - quite a critical difference! It makes sense after thinking about it, when you run <code class="language-plaintext highlighter-rouge">npm install</code> locally, where is it going to download all of the modules to? The <code class="language-plaintext filepath highlighter-rouge">node_modules</code> folder in the root of the project, of course.</p><p>The way the task works is it zips up and saves the <code class="language-plaintext highlighter-rouge">path</code> you specify and stores it to the build (as a build-in post-build step). During the next build, if the <code class="language-plaintext highlighter-rouge">key</code> matches, it downloads the zip and extracts it to the aforementioned <code class="language-plaintext highlighter-rouge">path</code>. Both of the above examples use the <code class="language-plaintext filepath highlighter-rouge">key: npm | “$(Agent.OS)” | $(Build.SourcesDirectory)/Project/package-lock.json</code>, where it matches the OS the build is running on as well as the hashed content of the <code class="language-plaintext filepath highlighter-rouge">package-lock.json</code> file.</p><p>This means, that if you flip a build from Windows to Ubuntu, the key won’t match, and the contents of the cache won’t be restored. Likewise, if the hash of the <code class="language-plaintext filepath highlighter-rouge">package-lock.json</code> file changes (ie: you add a package, change a package version, remove a package, etc.), the cache won’t be restored. In both cases, you would expect a full <code class="language-plaintext highlighter-rouge">npm install</code> from scratch. If the build completes successfully, you should expect a new cache to be uploaded as an automatically added post build step: <img data-src="/assets/screenshots/2021-11-14-azdo-angular-pipeline-caching/upload-cache.png" alt="uploading cache to pipeline" class="shadow" data-proofer-ignore> <em>Uploading of the cache as a post-job step</em></p><h2 id="how-to---just-the-yaml"><span class="mr-2">How To - Just the YAML</span><a href="#how-to---just-the-yaml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Putting it all together, here’s what my task looks like:</p><div class="language-yml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s">Cache@2</span>
  <span class="na">displayName</span><span class="pi">:</span> <span class="s">load npm cache</span>
  <span class="na">inputs</span><span class="pi">:</span>
    <span class="na">key</span><span class="pi">:</span> <span class="s">npm | $(Agent.OS) | $(Build.SourcesDirectory)/Source/MyWeb/package.json</span>
    <span class="na">restoreKeys</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="s">npm | "$(Agent.OS)"</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">$(Build.SourcesDirectory)/Source/MyWeb/node_modules</span>
    <span class="na">cacheHitVar</span><span class="pi">:</span> <span class="s">CACHE_HIT</span>
</pre></table></code></div></div><ul><li>Note: You’ll notice my example is using <code class="language-plaintext filepath highlighter-rouge">package.json</code> and not <code class="language-plaintext filepath highlighter-rouge">package-lock.json</code> - the team I was working with wasn’t using the <code class="language-plaintext filepath highlighter-rouge">package-lock.json</code> file, so I just wanted to illustrate that you can also use the <code class="language-plaintext filepath highlighter-rouge">package.json</code> as a key and it will work just as well<li>Note: The <code class="language-plaintext highlighter-rouge">cacheHitVar</code> set to <code class="language-plaintext highlighter-rouge">CACHE_HIT</code> will evaluate to <code class="language-plaintext highlighter-rouge">true</code> if the cache hit is a success - could be useful for a <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/release/caching?view=azure-devops#conditioning-on-cache-restoration">conditional task</a> where maybe you don’t even run the <code class="language-plaintext highlighter-rouge">npm install</code> command at all</ul><h2 id="gotchas"><span class="mr-2">Gotchas</span><a href="#gotchas" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>There’s no way to delete a cache once it’s stored in the pipeline - you can simply change the <code class="language-plaintext highlighter-rouge">key:</code> property by adding another string literal - see the below example:<div class="language-yml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre> <span class="c1"># from: </span>
 <span class="na">key</span><span class="pi">:</span> <span class="s">npm | $(Agent.OS) | $(Build.SourcesDirectory)/Source/MyWeb/package.json</span>
 <span class="c1"># to: </span>
 <span class="na">key</span><span class="pi">:</span> <span class="s">npm | node_modules | $(Agent.OS) | $(Build.SourcesDirectory)/Source/MyWeb/package.json</span>
</pre></table></code></div></div><li>Branches - the caches are isolated between branches - meaning that if I create a feature branch off main, I won’t be able to use main’s cache - <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/release/caching?view=azure-devops#cache-isolation-and-security">more info on this here</a><li>Pull request runs do not write cache to the source or target branch, only the intermediate branch such as <code class="language-plaintext highlighter-rouge">refs/pull/1/merge</code> - <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/release/caching?view=azure-devops#cache-isolation-and-security">more info on this here</a><li>Expiration - the cache expires after 7 days of no activity (hint - create a <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/process/scheduled-triggers?view=azure-devops&amp;tabs=yaml">scheduled build</a> if you want to ensure that a poor soul doesn’t have to experience a 20 minute build on Monday morning)</ul><p>I also like this <a href="https://medium.com/tenets/azure-pipeline-caching-a53e8117c242">Medium post from Dev Shah</a> for additional gotchas.</p><h2 id="summary"><span class="mr-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Before working with us, the team’s build averaged 30 minutes. Using a slimmed down build job and running using hosted agents brought us from 30 minutes to 20 minutes.</p><p>Since we have added and properly configured the Pipeline Cache task in our Angular CI build, we have shaved off <strong>10 minutes</strong> from each build. When our <code class="language-plaintext highlighter-rouge">npm build</code> alone takes 10 minutes, our average build time of 20 minutes has been reduced by 50% to 10 minutes: <img data-src="/assets/screenshots/2021-11-14-azdo-angular-pipeline-caching/build-time-comparison.png" alt="build time comparison" class="shadow" data-proofer-ignore> <em>Average build time of 20 minutes shaved down to 10 minutes after adding the Cache task</em></p><p>This was a huge win for the us and dev team, and I’m happy to say the third time’s the charm for me on trying to configure the Azure DevOps Pipeline Caching Task.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/azure-devops/'>Azure DevOps</a>, <a href='/categories/pipelines/'>Pipelines</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/azure-devops/" class="post-tag no-text-decoration" >Azure DevOps</a> <a href="/tags/pipelines/" class="post-tag no-text-decoration" >Pipelines</a> <a href="/tags/angular/" class="post-tag no-text-decoration" >Angular</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Working+Azure+DevOps+Pipeline+Caching+for+Angular+CI+-+josh-ops&url=https%3A%2F%2Fjosh-ops.com%2Fposts%2Fazdo-angular-pipeline-caching%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Working+Azure+DevOps+Pipeline+Caching+for+Angular+CI+-+josh-ops&u=https%3A%2F%2Fjosh-ops.com%2Fposts%2Fazdo-angular-pipeline-caching%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjosh-ops.com%2Fposts%2Fazdo-angular-pipeline-caching%2F&text=Working+Azure+DevOps+Pipeline+Caching+for+Angular+CI+-+josh-ops" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fjosh-ops.com%2Fposts%2Fazdo-angular-pipeline-caching%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/github-container-jobs/">Docker Container Jobs in GitHub Actions</a><li><a href="/posts/actions-runner-controller-without-cert-manager/">Configure actions-runner-controller without cert-manager</a><li><a href="/posts/azdo-commit-message-validator-and-pr-linker-github-action/">Azure DevOps Commit Message Validator and PR Linker GitHub Action</a><li><a href="/posts/azure-devops-migrate-work-items/">Azure DevOps: Migrate Work Items to New Organization / Project</a><li><a href="/posts/github-misc-scripts/">Miscellaneous GitHub API/GraphQL/CLI Automation Scripts</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/github/">GitHub</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/github-actions/">GitHub Actions</a> <a class="post-tag" href="/tags/pull-requests/">Pull Requests</a> <a class="post-tag" href="/tags/github-advanced-security/">GitHub Advanced Security</a> <a class="post-tag" href="/tags/scripts/">Scripts</a> <a class="post-tag" href="/tags/work-items/">Work Items</a> <a class="post-tag" href="/tags/branch-protection-rules/">Branch Protection Rules</a> <a class="post-tag" href="/tags/dependabot/">Dependabot</a> <a class="post-tag" href="/tags/codeql/">CodeQL</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/angular-tokenization/"><div class="card-body"> <em class="small" data-ts="1623972600" data-df="ll" > Jun 17, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Tokenizing Angular Environment Configuration in Azure DevOps</h3><div class="text-muted small"><p> Overview I was working with a team that had an Angular front-end application and I was tasked with improving their CI/CD process. They had some automated pipelines, but they were running a build b...</p></div></div></a></div><div class="card"> <a href="/posts/pipeline-templates/"><div class="card-body"> <em class="small" data-ts="1628827200" data-df="ll" > Aug 12, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Azure DevOps: Pipeline Templates</h3><div class="text-muted small"><p> Overview Although linked in various posts in this blog, I never fully advertise my pipeline-templates GitHub repository. I refer back to this every so often to see how I accomplished something in ...</p></div></div></a></div><div class="card"> <a href="/posts/agent-pool-error/"><div class="card-body"> <em class="small" data-ts="1629291600" data-df="ll" > Aug 18, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Azure DevOps: No agent pool found with identifier xx</h3><div class="text-muted small"><p> Overview We are using the Virtual Machine Scale Set (VMSS) Azure DevOps agents pretty heavily. They are perfect for our situation, needing to be able to deploy to services locked down by private e...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/azure-frontdoor-preview-experience/" class="btn btn-outline-primary" prompt="Older"><p>Azure Front Door Standard/Premium Preview - Tips, Tricks, and Lessons Learned</p></a> <a href="/posts/github-codespaces-powerlevel10k/" class="btn btn-outline-primary" prompt="Newer"><p>Powerlevel10k Zsh Theme in GitHub Codespaces</p></a></div><script src="https://utteranc.es/client.js" repo="joshjohanning/joshjohanning.github.io" issue-term="title" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/joshjohanning">Josh Johanning</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/github/">GitHub</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/github-actions/">GitHub Actions</a> <a class="post-tag" href="/tags/pull-requests/">Pull Requests</a> <a class="post-tag" href="/tags/github-advanced-security/">GitHub Advanced Security</a> <a class="post-tag" href="/tags/scripts/">Scripts</a> <a class="post-tag" href="/tags/work-items/">Work Items</a> <a class="post-tag" href="/tags/branch-protection-rules/">Branch Protection Rules</a> <a class="post-tag" href="/tags/dependabot/">Dependabot</a> <a class="post-tag" href="/tags/codeql/">CodeQL</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-GE92ZJY22K"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-GE92ZJY22K'); }); </script>
