<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="ApproveOps: GitHub IssueOps with Approvals" /><meta name="author" content="Josh Johanning" /><meta property="og:locale" content="en" /><meta name="description" content="Using GitHub Actions to build automation on top of Issues (IssueOps) with Approvals from someone in a designated GitHub team" /><meta property="og:description" content="Using GitHub Actions to build automation on top of Issues (IssueOps) with Approvals from someone in a designated GitHub team" /><link rel="canonical" href="https://josh-ops.com/posts/github-approveops/" /><meta property="og:url" content="https://josh-ops.com/posts/github-approveops/" /><meta property="og:site_name" content="josh-ops" /><meta property="og:image" content="https://josh-ops.com/2022-02-07-github-apps/app-bot.png" /><meta property="og:image:height" content="100%" /><meta property="og:image:width" content="100%" /><meta property="og:image:alt" content="ApproveOps - GitHub IssueOps with Approvals" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-08T08:30:00-06:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://josh-ops.com/2022-02-07-github-apps/app-bot.png" /><meta name="twitter:image:alt" content="ApproveOps - GitHub IssueOps with Approvals" /><meta property="twitter:title" content="ApproveOps: GitHub IssueOps with Approvals" /><meta name="twitter:site" content="@jjjettrain" /><meta name="twitter:creator" content="@Josh Johanning" /><meta name="google-site-verification" content="google-site-verification=eTIC71VhPBtwll8rNv7qlXud1yJh6E88No39MdcM_MI" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Josh Johanning"},"dateModified":"2022-07-01T15:39:30-05:00","datePublished":"2022-02-08T08:30:00-06:00","description":"Using GitHub Actions to build automation on top of Issues (IssueOps) with Approvals from someone in a designated GitHub team","headline":"ApproveOps: GitHub IssueOps with Approvals","image":{"width":"100%","height":"100%","alt":"ApproveOps - GitHub IssueOps with Approvals","url":"https://josh-ops.com/2022-02-07-github-apps/app-bot.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://josh-ops.com/posts/github-approveops/"},"url":"https://josh-ops.com/posts/github-approveops/"}</script><title>ApproveOps: GitHub IssueOps with Approvals | josh-ops</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="josh-ops"><meta name="application-name" content="josh-ops"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/sample/headshot.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">josh-ops</a></div><div class="site-subtitle font-italic">A DevOps Blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/speaking/" class="nav-link"> <i class="fa-fw fas fa-comment ml-xl-3 mr-xl-3 unloaded"></i> <span>SPEAKING</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/joshjohanning" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/jjjettrain" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/joshua-johanning/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>ApproveOps: GitHub IssueOps with Approvals</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>ApproveOps: GitHub IssueOps with Approvals</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1644330600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 8, 2022 </em> </span> <span> Updated <em class="" data-ts="1656707970" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 1, 2022 </em> </span><div class="mt-3 mb-3"> <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100% 100%'%3E%3C/svg%3E" data-src="/assets/screenshots/2022-02-08-github-approveops/../2022-02-07-github-apps/app-bot.png" class="preview-img bg" alt="ApproveOps - GitHub IssueOps with Approvals" width="100%" height="100%" data-proofer-ignore><figcaption class="pt-2 pb-2">ApproveOps - GitHub IssueOps with Approvals</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> Josh Johanning </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1060 words"> <em>5 min</em> read</span></div></div></div><div class="post-content"><h2 id="overview"><span class="mr-2">Overview</span><a href="#overview" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>This is follow-up to my previous post, <a href="/posts/github-apps">Demystifying GitHub Apps: Using GitHub Apps to Replace Service Accounts</a>, where I go over the basics of creating a GitHub App and accessing its installation access token in an action</em></p><p>I was working with a customer and we built out a self-service migration solution to migrate from GitHub Enterprise Server to GitHub Enterprise Cloud. Instead of building our own custom interface, we decided to leverage GitHub Issues as the intake and GitHub Actions as the automation mechanism. This is often referred to as “IssueOps”.</p><p>There are several great examples of <a href="https://github.com/topics/issueops">IssueOps on GitHub</a>, as well as my co-worker’s <a href="https://colinsalmcorner.com/chatops-with-github-actions-and-azure-web-apps/">ChatOps</a> workflow.</p><p>The benefit of using GitHub and IssueOps for something like this is the transparency of the process - the Issue is available for everyone to see as well as the logs of the Action. The customer just inputs the Git repository URL’s and a few other inputs, the issue body is parsed, and a pre-migration comment is automatically posted back to the issue by our bot with a slash command that is used to trigger the migration.</p><p>However, a requirement for the customer was to have a way to approve the migration. We could have had an <a href="https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment">approval on an environment on the job</a>, but that interface brought you away from the issue. For example, after someone initiates a deployment, the requestor doesn’t necessarily know it’s just sitting for an approval. While the approver(s) would get an email and optionally a push notification in the GitHub mobile app, it doesn’t seem there is anything that shows up under the <a href="https://docs.github.com/en/account-and-profile/managing-subscriptions-and-notifications-on-github/setting-up-notifications/about-notifications">GitHub notifications bell</a>.</p><p>If only there was a way to only allow the deployment if someone authorized issued some sort of command ahead of time in the issue… This is where ApproveOps comes in!</p><h2 id="the-solution-approveops"><span class="mr-2">The Solution: ApproveOps</span><a href="#the-solution-approveops" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>As I hinted, ApproveOps is a simple extension of IssueOps that requires a slash command in the issue comment body from someone in the ‘migration approval’ team. In our solution, the slash command to run the deployment was <code class="language-plaintext highlighter-rouge">/run-migration</code> and our approval command we used was <code class="language-plaintext highlighter-rouge">/approve</code>.</p><p>If a user runs the migration command without someone approving ahead of time, a bot will comment on the issue saying that it isn’t yet approved and to have someone in the approval team approve the migration by entering in the approval command. If someone who isn’t in the specified approval team tries to approve the migration, their approval comment will simply be ignored because they aren’t in the approval team in GitHub.</p><p>Here’s how it looks and works in the issue:</p><p><img data-src="/assets/screenshots/2022-02-08-github-approveops/approveops.png" alt="ApproveOps" class="shadow" data-proofer-ignore> <em>ApproveOps sample - the <code class="language-plaintext highlighter-rouge">/run-migration</code> command doesn’t run the workflow unless someone authorized has commented <code class="language-plaintext highlighter-rouge">/approve</code></em></p><p>And here is how one of the runs looks in GitHub Actions:</p><p><img data-src="/assets/screenshots/2022-02-08-github-approveops/approveops-action-run.png" alt="ApproveOps Action Run" class="shadow" data-proofer-ignore> <em>The ApproveOps run in GitHub Actions - the migration job is skipped if no one has approved in the issue yet</em></p><h2 id="the-code"><span class="mr-2">The Code</span><a href="#the-code" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I recently created a <a href="https://github.com/marketplace/actions/approveops-approvals-in-issueops">GitHub Action published on the marketplace</a> that consolidates the various actions and bash commands. If you’re not interested in using the marketplace action or want to extend what I’ve done, my <a href="https://github.com/joshjohanning/ApproveOps/blob/main/.github/workflows/approveops.yml">GitHub Actions workflow sample</a> is still available in its entirety.</p><p>Here’s how you can use my Action in a GitHub Action workflow:</p><div file=".github/workflows/approveops.yml" class="language-yml highlighter-rouge"><div class="code-header"> <span data-label-text=".github/workflows/approveops.yml"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="na">name</span><span class="pi">:</span> <span class="s">Approve Ops</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="na">issue_comment</span><span class="pi">:</span>
    <span class="na">types</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">created</span><span class="pi">,</span> <span class="nv">edited</span><span class="pi">]</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">approveops</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">contains(github.event.comment.body, '/run-migration')</span>
    <span class="c1"># optional - if we want to use the output to determine if we run the migration job or not</span>
    <span class="na">outputs</span><span class="pi">:</span> 
      <span class="na">approved</span><span class="pi">:</span> <span class="s">${{ steps.check-approval.outputs.approved }}</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">ApproveOps - ApproveOps in IssueOps</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">joshjohanning/ApproveOps@v1</span>
        <span class="na">id</span><span class="pi">:</span> <span class="s">check-approval</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">app-id</span><span class="pi">:</span> <span class="m">170284</span>
          <span class="na">app-private-key</span><span class="pi">:</span> <span class="s">${{ secrets.PRIVATE_KEY }}</span>
          <span class="na">team-name</span><span class="pi">:</span> <span class="s">approver-team</span>
          <span class="na">fail-if-approval-not-found</span><span class="pi">:</span> <span class="no">false</span>

  <span class="na">migration</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="s">approveops</span>
    <span class="c1"># optional - if we want to use the output to determine if we run the migration job or not</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">${{ steps.approveops.outputs.approved == 'true' }}</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">echo "run migration!"</span>
</pre></table></code></div></div><h2 id="setup-and-explanation"><span class="mr-2">Setup and Explanation</span><a href="#setup-and-explanation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="prerequisites"><span class="mr-2">Prerequisites</span><a href="#prerequisites" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Since accessing team membership is outside the scope of the <a href="https://dev.to/github/the-githubtoken-in-github-actions-how-it-works-change-permissions-customizations-3cgp">GitHub Token</a>, we have to either use our <a href="/posts/github-apps/#scenario-2-using-a-github-app-as-a-rich-comment-bot">GitHub App created in this related post</a> or create a PAT with <code class="language-plaintext highlighter-rouge">read:org</code> scope and use it to get the team membership<li>At least one member in the approver team, otherwise <code class="language-plaintext highlighter-rouge">jq</code> won’t be able to find the <code class="language-plaintext highlighter-rouge">.[].login</code> property (this could probably be written more defensively :) )</ul><h3 id="explanation"><span class="mr-2">Explanation</span><a href="#explanation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>I am using a <a href="https://github.com/joshjohanning/ApproveOps/blob/main/.github/workflows/approveops.yml#L28:L53">bash script in my composite action</a> to:</p><ol><li>Get a list of users in the approval team<li>Get a list of comments on the issue (note that I am converting the comments to base64 otherwise comments that had spaces in them would throw the loop off - this was a <a href="https://www.starkandwayne.com/blog/bash-for-loop-over-json-array-using-jq/">good resource for explaining that</a>)<li>Check that the comment issue body contains the <code class="language-plaintext highlighter-rouge">/approve</code> command<li>If so, check if the user who posted the <code class="language-plaintext highlighter-rouge">/approve</code> command is in the approval team (from step 1) by using a <code class="language-plaintext highlighter-rouge">grep</code> command<li>Setting an <a href="https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions#setting-an-output-parameter">output parameter</a> depending if the migration is authorized to run or not<li>If there aren’t any authenticated approvals, I’m also setting a user-friendly <a href="https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions#setting-an-error-message">error message</a> to be helpful when looking at why the action run failed<li>Afterwards, we use the output parameter and <code class="language-plaintext highlighter-rouge">if:</code> logic to post the write comment on the workflow, either requesting proper approval or informing the user that the migration will now run since it has been approved<li>I’m using additional <code class="language-plaintext highlighter-rouge">if:</code> logic and the <code class="language-plaintext highlighter-rouge">approveops</code> jobs’ output to determine if the <code class="language-plaintext highlighter-rouge">migration</code> job should run or not<ul><li>As an alternative, I could see one omitting this using a single job with additional <code class="language-plaintext highlighter-rouge">if:</code> logic on the rest of the migration steps, but this could be messy<li>If using the same job and you didn’t mind seeing failed runs in the UI because of lack of approvals, you could fail the workflow run by setting <code class="language-plaintext highlighter-rouge">fail-if-approval-not-found: true</code></ul></ol><h2 id="wrap-up"><span class="mr-2">Wrap-up</span><a href="#wrap-up" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>There’s definitely room for improvement here, but I think this is a good starting point for you to get with your own ApproveOps / IssueOps workflow.</p><p>If you do what I’m doing here, by creating your own <a href="/posts/github-apps#scenario-2-using-a-github-app-as-a-rich-comment-bot">GitHub App on your organization</a> and use that identity to write your comment, it will be able to properly <code class="language-plaintext highlighter-rouge">@team</code> mention in the comment and everything!</p><p>Report back if you make any enhancements!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/github/'>GitHub</a>, <a href='/categories/actions/'>Actions</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/github/" class="post-tag no-text-decoration" >GitHub</a> <a href="/tags/github-issues/" class="post-tag no-text-decoration" >GitHub Issues</a> <a href="/tags/github-actions/" class="post-tag no-text-decoration" >GitHub Actions</a> <a href="/tags/github-apps/" class="post-tag no-text-decoration" >GitHub Apps</a> <a href="/tags/issueops/" class="post-tag no-text-decoration" >IssueOps</a> <a href="/tags/chatops/" class="post-tag no-text-decoration" >ChatOps</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=ApproveOps%3A+GitHub+IssueOps+with+Approvals+-+josh-ops&url=https%3A%2F%2Fjosh-ops.com%2Fposts%2Fgithub-approveops%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=ApproveOps%3A+GitHub+IssueOps+with+Approvals+-+josh-ops&u=https%3A%2F%2Fjosh-ops.com%2Fposts%2Fgithub-approveops%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjosh-ops.com%2Fposts%2Fgithub-approveops%2F&text=ApproveOps%3A+GitHub+IssueOps+with+Approvals+-+josh-ops" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fjosh-ops.com%2Fposts%2Fgithub-approveops%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/github-container-jobs/">Docker Container Jobs in GitHub Actions</a><li><a href="/posts/actions-runner-controller-without-cert-manager/">Configure actions-runner-controller without cert-manager</a><li><a href="/posts/azdo-commit-message-validator-and-pr-linker-github-action/">Azure DevOps Commit Message Validator and PR Linker GitHub Action</a><li><a href="/posts/azure-devops-migrate-work-items/">Azure DevOps: Migrate Work Items to New Organization / Project</a><li><a href="/posts/github-misc-scripts/">Miscellaneous GitHub API/GraphQL/CLI Automation Scripts</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/github/">GitHub</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/github-actions/">GitHub Actions</a> <a class="post-tag" href="/tags/pull-requests/">Pull Requests</a> <a class="post-tag" href="/tags/github-advanced-security/">GitHub Advanced Security</a> <a class="post-tag" href="/tags/scripts/">Scripts</a> <a class="post-tag" href="/tags/work-items/">Work Items</a> <a class="post-tag" href="/tags/branch-protection-rules/">Branch Protection Rules</a> <a class="post-tag" href="/tags/dependabot/">Dependabot</a> <a class="post-tag" href="/tags/codeql/">CodeQL</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/github-apps/"><div class="card-body"> <em class="small" data-ts="1644285600" data-df="ll" > Feb 7, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Demystifying GitHub Apps: Using GitHub Apps to Replace Service Accounts</h3><div class="text-muted small"><p> Overview In GitHub Actions, the GitHub Token works very well and is convenient for automation tasks that require authentication, but its scope is limited. The GitHub Token is only going to allow u...</p></div></div></a></div><div class="card"> <a href="/posts/gh-auth-login-in-actions/"><div class="card-body"> <em class="small" data-ts="1648486800" data-df="ll" > Mar 28, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to use gh auth login CLI Programmatically in GitHub Actions</h3><div class="text-muted small"><p> Overview Quick post here since I have to search for this every time I try to use the gh cli in GitHub Actions. In order to use the gh cli, you typically have to run gh auth login to authenticate. ...</p></div></div></a></div><div class="card"> <a href="/posts/actions-runner-controller-without-cert-manager/"><div class="card-body"> <em class="small" data-ts="1656450000" data-df="ll" > Jun 28, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Configure actions-runner-controller without cert-manager</h3><div class="text-muted small"><p> Overview actions-runner-controller is a great way to set up self-scaling GitHub runners in a Kubernetes cluster. This allows teams to scale up their self-hosted runners as more jobs are queued thr...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/github-apps/" class="btn btn-outline-primary" prompt="Older"><p>Demystifying GitHub Apps: Using GitHub Apps to Replace Service Accounts</p></a> <a href="/posts/github-container-jobs/" class="btn btn-outline-primary" prompt="Newer"><p>Docker Container Jobs in GitHub Actions</p></a></div><script src="https://utteranc.es/client.js" repo="joshjohanning/joshjohanning.github.io" issue-term="title" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/joshjohanning">Josh Johanning</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/github/">GitHub</a> <a class="post-tag" href="/tags/azure-devops/">Azure DevOps</a> <a class="post-tag" href="/tags/github-actions/">GitHub Actions</a> <a class="post-tag" href="/tags/pull-requests/">Pull Requests</a> <a class="post-tag" href="/tags/github-advanced-security/">GitHub Advanced Security</a> <a class="post-tag" href="/tags/scripts/">Scripts</a> <a class="post-tag" href="/tags/work-items/">Work Items</a> <a class="post-tag" href="/tags/branch-protection-rules/">Branch Protection Rules</a> <a class="post-tag" href="/tags/dependabot/">Dependabot</a> <a class="post-tag" href="/tags/codeql/">CodeQL</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-GE92ZJY22K"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-GE92ZJY22K'); }); </script>
